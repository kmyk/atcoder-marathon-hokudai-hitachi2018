# 北大・日立新概念コンピューティングコンテスト2018

<https://atcoder.jp/contests/hokudai-hitachi2018/>

## 問題

自然数係数多項式 f : 2^N → ℕ が与えられる。これを2次で近似したい。
高々2次多項式 g : 2^N → 2^M → ℕ であって f(X) = min { g(X, W) | W } をできる限り満たし (上回るのはよいが下回ってはいけない) かつできる限り単純なものを出力せよ。


## 考察

-   どうせ高次の項はほとんど常に 0 (Midnight Sun CTF Finals)
-   W によってうまく値がばらけるようにすればどれかひとつは当たらない？ -> min なのでだめ
-   ぜんぶ 1 のときの処理どうする？ -> 簡単にチェックできるし適当に合わせられるでしょ
-   一様ランダムらしいのでやはり n 次の項は (1/2)^n の確率でしか発生しない
    -   n = 6 なら 1.6%
-   低次の項はそのまま使えるので借りてくればよい
-   高次の項も分割して借りればよい: 3xyz = xy + yz + zx
-   g - f を焼き鈍しで最小化して弾くとかしないと、システムケースの100個を耐えられない
-   w要る？
-   1 - x1 とすることで not x1 を書ける
    -   これは線形なのでどこで使ってもよい
    -   x1 - x1 x2 とすることで x1 not x2 を書ける
-   x1 w1 + x2 not w1 とすることで min x1 x2 を書ける -> 単に x1 x2 でよい
-   たくさん項を使えば x1 x2 x3 も書ける？
    -   \sum x_i not x_j を考えれば not x1 not x2 not x3 を書くことに等しい
    -   (x1 w1 + x2 w1 + x3 not w1) + (x1 w2 + x2 not w2 + x3 w2) + (x1 not w3 + x2 w3 + x3 w3) で書ける
    -   min(x1 x2, x3 x4) を書きたい
-   x1 x2 <-> w1 となるように設定できるか？
    -   k (x1 x2 + 3 w1 - 2 x1 w1 + 2 x2 w2) でできる
    -   ただし k は十分大きくすること
    -   CTF で LLL するときよくあるやつ
-   係数が負のとき - x1 x2 x3 x4 などは簡単に書ける
    -   w1 (3 - x1 - x2 - x3 - x4)
    -   min(0, t) は書ける
-   係数が正のとき x1 x2 x3 x4 なども同様に簡単に書ける？
    -   max(0, t) は書ける？
-   このあたり当然のように論文に書いてた。となると評価基準hackをしていくしかない
-   係数を減らすため (c1 + c2) w1 x1 は c1 w1 x1 + c2 w2 x1 に分割する
-   高次の項を無視する 無視できないように全部 1 が入ってるけど、適当にペアにして消す

## TODO

-   論文を読む
-   制約違反解消できない
-   checkerのコードを貰う
-   level-2 homomorphic encryption
    -   <https://www.slideshare.net/herumi/practical-twolevel-homomorphic-encryption-in-primeorder-bilinear-groups>
